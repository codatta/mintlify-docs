---
title: "变更日志"
description: "本文档记录了 Codatta 在 2025 年的所有更新、修复和新功能。"
---

import { useState, useEffect } from 'react';

<div style={{
  backgroundColor: '#ffffff',
  border: '1px solid #e5e7eb',
  borderRadius: '0.75rem',
  padding: '0.875rem 1.25rem',
  marginBottom: '2rem',
  boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)'
}}>
  <div style={{ 
    display: 'flex', 
    alignItems: 'center', 
    flexWrap: 'wrap', 
    gap: '1rem',
    marginBottom: '0.1rem'
  }}>
    <ChangelogFilter />
    <MonthFilter />
  </div>
  
  {(() => {
    const ShowResult = () => {
      const [num, setNum] = useState(0);
      useEffect(() => {
        if (typeof document === 'undefined') return;
        const update = () => {
          try {
            const items = document.querySelectorAll('.changelog-item');
            let count = 0;
            items.forEach(item => {
              if (item.style.display !== 'none') count++;
            });
            setNum(count);
          } catch {}
        };
        update();
        const id = setInterval(update, 2000);
        return () => clearInterval(id);
      }, []);
      return (
        <div style={{
          display: 'flex',
          alignItems: 'center',
          padding: '0.5rem 0.875rem',
          backgroundColor: '#f9fafb',
          borderRadius: '0.5rem',
          fontSize: '0.8125rem',
          color: '#6b7280',
          border: '1px solid #e5e7eb',
          display: 'inline-flex',
          fontWeight: '500',
          letterSpacing: '0.01em'
        }}>
          <span style={{
            display: 'inline-block',
            width: '6px',
            height: '6px',
            borderRadius: '50%',
            backgroundColor: '#10b981',
            marginRight: '0.5rem',
            flexShrink: 0
          }}></span>
          <strong style={{color:'#111827', fontWeight:'600', marginRight: '0.25rem'}}>{num}</strong>
          <span>条结果</span>
        </div>
      );
    };
    return <ShowResult />;
  })()}
</div>
<div className="changelog-item" data-type="core-feature" data-month="dec">

## 4.2.7 2025 年 12 月 04 日

---
**激励机制演变：长期生态系统管理的奖励锁仓**

<br />

<div style={{ marginTop: "1rem" }}></div>

为高激励任务（例如，在 Airdrop 或 Frontier 活动中）提供的可选锁仓功能。

- **触发：** 活动结束后，奖励将存入您的余额。
- **锁仓：** 通过资产页面将奖励锁定在智能合约中以确保安全。
- **释放：** 在锁仓期结束后，您可以一键将奖励直接提取到您的钱包。

这是我们激励系统向精细化管理演变的关键一步。它为高奖励场景中的流动性管理提供了工具，平衡了短期参与与生态系统的长期健康。

</div>

<div className="changelog-item" data-type="campaign" data-month="nov">

## 4.2.5 2025 年 11 月 24 日
---
**活动启动：Airdrop 第二季**

<br />

<div style={{ marginTop: "1rem" }}></div>

系统性地收集物理学、金融和多模态领域的学术级数据集，并为三个新 Frontier 建立高质量的数据管道。

- **操作：** 启动 Airdrop 第二季，奖金池为 100 万 $XNY（3 个月线性解锁）。
- **新 Frontier：**
  - **高级物理问题：** 供领域专家提交当前 AI 无法正确回答的高难度物理问题。
  - **加密与股票信息：** 为 AI 提供与加密货币和股票投资决策相关的可靠信息。
  - **现实世界照片：** 为 AI 提供包含注释元数据的现实世界照片。
- **奖励结构：** 任务完成奖励占 90%，排行榜排名奖励占 10%。
- **活动时间：** 2025 年 11 月 24 日 09:00 UTC – 2025 年 12 月 08 日 09:00 UTC。

</div>

<div className="changelog-item" data-type="core-feature" data-month="nov">

## 4.2.0 2025 年 11 月 05 日
---
**账户系统升级：DID 正式上线**

<br />

<div style={{ marginTop: "1rem" }}></div>

一项基础升级，使账户绑定到去中心化标识符（DID）。

- **绑定：** 通过下次登录 Codatta 自助集成链上 DID。
- **关联：** 绑定的 DID 作为统一主键，系统性地索引所有任务操作、数据贡献和奖励分配。
- **血缘：** 实现链上和链下活动的完全可追溯性和验证，建立不可变的数据来源。

此部署为可验证的数据经济奠定了技术基础。通过为每位贡献者提供持久的、独特的数字身份，我们实现了精细的贡献归属、明确的所有权验证和透明的激励分配。

</div>

<div className="changelog-item" data-type="fixes" data-month="nov">

## 4.1.5 2025 年 11 月 03 日
---
**任务系统调整：Crypto Frontier QUEST 模块停用**

<br />

<div style={{ marginTop: "1rem" }}></div>

整个 Crypto Frontier QUEST 模块及所有相关任务（包括提交、验证和赏金猎人）已下线。

- **原因：** 该模块已完成当前产品路线图下的计划生命周期。停用支持系统精简和资源重新分配，以便于即将发布的新功能。
- **注意：** 用户在该模块的历史贡献记录和获得的奖励保持不变。此更改不影响其他 Frontier 模块。

</div>

<div className="changelog-item" data-type="fixes" data-month="oct">

## 4.1.4 2025 年 10 月 24 日
---
**Frontier 系统调整：Robotics Frontier 停用**

<br />

<div style={{ marginTop: "1rem" }}></div>

Robotics Frontier 已正式停用。此操作仅影响前端入口点。所有历史贡献数据保持完整且可访问。

- **原因：** 此决定是我们持续产品精简的一部分，旨在将资源和用户注意力集中在我们最高优先级的活跃前沿。Robotics Frontier 已完成其计划的探索阶段，停用使我们能够整合努力。
- **注意：** 用户在 Robotics Frontier 的过去贡献和奖励被保留，并可在其贡献历史中查看。其他前沿或平台功能不受影响。

</div>

<div className="changelog-item" data-type="optimization" data-month="oct">

## 4.1.3 2025 年 10 月 23 日
---
**反垃圾邮件增强：实施每日提交限制**

<br />

<div style={{ marginTop: "1rem" }}></div>

一项新的平台安全政策，以防止任务垃圾邮件。

- **运作方式：** 对每个任务实施可配置的每日提交上限。
- **原因：** 保护系统资源，确保所有贡献者的公平参与，并维护任务生态系统的长期健康和公平性。

</div>

<div className="changelog-item" data-type="fixes" data-month="oct">

## 4.1.2 2025 年 10 月 20 日
---
**Frontier 系统调整：Crypto Frontier 停用**

<br />

<div style={{ marginTop: "1rem" }}></div>

Crypto Frontier 已正式停用。此操作仅影响前端入口点。所有历史贡献数据保持完整且可访问。

- **原因：** 此决定是我们持续产品精简的一部分，旨在将资源和用户注意力集中在我们最高优先级的活跃前沿。Crypto Frontier 已完成其计划的探索阶段，停用使我们能够整合努力。
- **注意：** 用户在 Crypto Frontier 的过去贡献和奖励被保留，并可在其贡献历史中查看。其他前沿或平台功能不受影响。

</div>

<div className="changelog-item" data-type="optimization" data-month="oct">

## 4.1.1 2025 年 10 月 15 日
---
**系统治理：实施平台黑名单控制**

<br />

<div style={{ marginTop: "1rem" }}></div>

平台上实施了一项新的黑名单控制功能。

- **运作方式：** 指定的管理员现在可以应用黑名单规则以限制恶意账户。
- **原因：** 增强平台安全性，保护贡献者利益，维护生态系统公平性。

</div>

<div className="changelog-item" data-type="campaign" data-month="oct">

## 4.1.0 2025 年 10 月 13 日
---
**活动启动：Airdrop 第一季**

<br />

<div style={{ marginTop: "1rem" }}></div>

通过高奖励机制和反垃圾邮件执行系统性地收集高质量、结构化的数据，确保有效性和学术价值，并奖励长期贡献者，丰富平台的数据生态系统，推出五个新 Frontier 模块。

- **操作：** 启动 Airdrop 第一季，奖金池为 250 万 $XNY 和积分奖励。
- **新 Frontier：**
  - **模型比较：** 比较不同 AI 模型的性能指标和业务结果，以识别最佳或混合解决方案。
  - **识别 LLM 的错误：** 识别 LLM 输出中的推理、事实和逻辑错误，以支持模型优化。
  - **纠正 LLM 的错误：** 收集纠正数据，帮助 LLM 从错误中学习，提高自我纠正和推理能力。
  - **食品科学：** 收集食品科学和营养功能方面的研究数据，以推动该领域的创新。
  - **生活记录画布：** 跟踪和记录个人行为和健康相关数据，以支持行为及相关研究。
- **奖励结构：** 奖励根据提交评分排名，并在活动结束后分配。恶意提交将受到惩罚，以确保数据质量。
- **活动时间：** 2025 年 10 月 13 日 09:00 UTC - 2025 年 10 月 27 日 09:00 UTC。

</div>

<div className="changelog-item" data-type="core-feature" data-month="oct">

## 4.0.0 2025 年 10 月 10 日
---
**功能发布：特定 Frontier 的奖励活动**

<br />

<div style={{ marginTop: "1rem" }}></div>

现在为 Frontiers 提供可配置的奖励活动，提供额外的高价值激励。

- **运作方式:** 选择的 Frontier 任务提供额外的奖励，奖励以 $XNY 或 USDT 形式发放，与基础积分无关。活动参数（奖励金额、持续时间、目标）根据每个 Frontier 设置，并在其各自的主页上显示。
- **原因:** 通过有针对性的激励措施，推动对高价值数据任务的更深入参与，提高数据质量和生态系统的参与度。

</div>

<div className="changelog-item" data-type="campaign" data-month="sep">

## 3.9.9 2025 年 09 月 26 日
---
**活动启动：Codatta Booster 活动 第三季 第四周**

<br />

<div style={{ marginTop: "1rem" }}></div>

通过可信的多领域数据收集加速 AI 发展，并促进社区驱动的去中心化 AI 知识构建。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY（有锁仓期），在任务完成和验证后分配。
- **活动时间:** 2025 年 09 月 26 日 07:00 UTC – 2025 年 10 月 03 日 07:00 UTC。

</div>

<div className="changelog-item" data-type="campaign" data-month="sep">

## 3.9.8 2025 年 09 月 12 日
---
**活动启动：Codatta Booster 活动 第三季 第三周**

<br />

<div style={{ marginTop: "1rem" }}></div>

收集跨领域数据，涵盖生活、机器人、加密货币、模型比较和指纹验证，以用于 AI 训练和验证。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY（有锁仓期），在任务完成和验证后分配。
- **活动时间:** 2025 年 09 月 12 日 07:00 UTC – 2025 年 09 月 19 日 07:00 UTC。

</div>

<div className="changelog-item" data-type="campaign" data-month="sep">

## 3.9.6 2025 年 09 月 05 日
---
**活动启动：Codatta Booster 活动 第三季 第二周**

<br />

<div style={{ marginTop: "1rem" }}></div>

收集和注释跨领域数据，涵盖生活、机器人和加密货币，以用于 AI 训练和验证。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY（有锁仓期），在任务完成和验证后分配。
- **活动时间:** 2025 年 09 月 05 日 07:00 UTC – 2025 年 09 月 12 日 07:00 UTC。

</div>

<div className="changelog-item" data-type="core-feature" data-month="aug">

## 3.9.3 2025 年 08 月 28 日
---
**功能发布：用户数据档案**

<br />

<div style={{ marginTop: "1rem" }}></div>

在用户信息模块中引入新的数据档案功能。

- **运作方式:** 通过用户信息 > 数据档案访问，查看您的总提交、获得的奖励和贡献统计信息，呈现在可视化仪表板中。
- **原因:** 提供对您贡献的透明度，通过可见的进度跟踪增强参与感，并支持长期参与。

</div>

<div className="changelog-item" data-type="campaign" data-month="aug">

## 3.9.2 2025 年 08 月 22 日
---
**活动启动：Codatta Booster 活动 第三季 第一周**

<br />

<div style={{ marginTop: "1rem" }}></div>

为去中心化 AI 训练建立跨领域注释数据的基础，涵盖生活、机器人和加密货币。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY（有锁仓期），在任务完成和验证后分配。
- **活动时间:** 2025 年 08 月 22 日 07:00 UTC – 2025 年 08 月 29 日 07:00 UTC。

</div>

<div className="changelog-item" data-type="campaign" data-month="aug">

## 3.9.1 2025 年 08 月 15 日
---
**活动启动：Codatta Booster 活动 第二季 第四周**

<br />

<div style={{ marginTop: "1rem" }}></div>

系统性地注释和扩展食品 AI、机器人交互和 CEX 链上数据的领域特定数据集，以用于去中心化 AI 训练。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY（有锁仓期），在任务完成和验证后分配。
- **活动时间:** 2025 年 08 月 15 日 07:00 UTC – 2025 年 08 月 22 日 07:00 UTC。

</div>

<div className="changelog-item" data-type="campaign" data-month="aug">

## 3.8.9 2025 年 08 月 08 日
---
**活动启动：Codatta Booster 活动 第二季 第三周**

<br />

<div style={{ marginTop: "1rem" }}></div>

系统性地收集四个关键领域的注释数据：项目学习、食品 AI 判断、机器人注释和 CEX 数据扩展。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY（有锁仓期），在任务完成和验证后分配。
- **活动时间:** 2025 年 08 月 08 日 07:00 UTC – 2025 年 08 月 15 日 07:00 UTC。

</div>

<div className="changelog-item" data-type="campaign" data-month="aug">

## 3.8.8 2025 年 08 月 01 日
---
**活动启动：Codatta Booster 活动 第二季 第二周**

<br />

<div style={{ marginTop: "1rem" }}></div>

收集三个核心领域的注释数据：AI 食品模型比较、机器人交互注释和 CEX 热钱包数据标注。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY（有锁仓期），在任务完成和验证后分配。
- **活动时间:** 2025 年 08 月 01 日 07:00 UTC – 2025 年 08 月 08 日 07:00 UTC。

</div>

<div className="changelog-item" data-type="campaign" data-month="jul">

## 3.8.7 2025 年 07 月 24 日
---
**活动启动：Codatta Booster 活动 第二季 第一周**

<br />

<div style={{ marginTop: "1rem" }}></div>

通过注释的真实世界交互数据来验证 AI 食品分析并增强机器人训练。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY（有锁仓期），在任务完成和验证后分配。
- **活动时间:** 2025 年 07 月 24 日 07:00 UTC – 2025 年 07 月 31 日 07:00 UTC。

</div>

<div className="changelog-item" data-type="campaign" data-month="jul">

## 3.8.5 2025 年 07 月 16 日
---
**活动启动：Codatta Booster 活动 第一季 第四周**

<br />

<div style={{ marginTop: "1rem" }}></div>

通过收集丰富的注释，深化 AI 对食品的理解，这些注释不仅限于标签，还包括重量、烹饪方法和热量含量。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY，在任务完成和验证后分配。
- **活动时间:** 2025 年 07 月 16 日 13:00 UTC – 2025 年 07 月 23 日 13:00 UTC。

</div>

<div className="changelog-item" data-type="campaign" data-month="jul">

## 3.8.4 2025 年 07 月 09 日
---
**活动启动：Codatta Booster 活动 第一季 第三周**

<br />

<div style={{ marginTop: "1rem" }}></div>

通过收集即食食品的注释图像，教会 AI 对人类饮食习惯的细致理解，关注文化和上下文的相关性，而不仅仅是简单的标签。

- **参与方式:** 通过 Binance Wallet Booster 标签或主页横幅访问（需要 Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY，在任务完成和验证后分配。
- **活动时间:** 2025 年 07 月 09 日 13:00 UTC – 2025 年 07 月 16 日 13:00 UTC。

</div>

<div className="changelog-item" data-type="optimization" data-month="jul">

## 3.8.3 2025 年 07 月 07 日
---
**功能优化：任务系统恢复**

<br />

<div style={{ marginTop: "1rem" }}></div>

任务系统已全面恢复并重新开放。

- **运作方式:** 于 2025 年 06 月 30 日暂时下线，现在已全面恢复。
- **原因:** 通过架构升级增强系统稳定性和用户体验。

</div>

<div className="changelog-item" data-type="campaign" data-month="jul">

## 3.8.2 2025 年 07 月 02 日
---
**活动启动：Codatta Booster 活动第一季第二周**

<br />

<div style={{ marginTop: "1rem" }}></div>

通过对素食、非素食和混合类别的细致图像标注，扩展 AI 对全球食品文化和偏好的理解。

- **参与方式:** 可通过 Binance Wallet Booster 标签或主页横幅访问（Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY，任务完成并验证后分发。
- **活动时间:** 2025 年 07 月 02 日 13:00 UTC – 2025 年 07 月 09 日 13:00 UTC。

</div>

<div className="changelog-item" data-type="campaign" data-month="jun">

## 3.8.0 2025 年 06 月 25 日
---
**活动启动：Codatta Booster 活动第一季第一周**

<br />

<div style={{ marginTop: "1rem" }}></div>

通过收集注释食品数据、通过测验吸引社区知识，并通过多层次激励结构奖励参与，启动首季活动。

- **参与方式:** 可通过 Binance Wallet Booster 标签或主页横幅访问（Alpha Points ≥ 61）。
- **奖励:** 总奖励池为 50,000,000 $XNY，任务完成并验证后分发。
- **活动时间:** 2025 年 06 月 25 日 13:00 UTC – 2025 年 07 月 02 日 13:00 UTC。

</div>{/* Component definitions - moved to end of file for cleaner code organization */}
export const ChangelogFilter = () => {
  const [activeFilter, setActiveFilter] = useState('all');
  const [isOpen, setIsOpen] = useState(false);
  const [isMenuHovered, setIsMenuHovered] = useState(false);

  useEffect(() => {
    window.activeTypeFilter = activeFilter;
  }, [activeFilter]);

  useEffect(() => {
    const items = document.querySelectorAll('.changelog-item');
    const activeMonth = window.activeMonthFilter || 'all';
    
    items.forEach((item) => {
      const itemType = item.getAttribute('data-type');
      const itemMonth = item.getAttribute('data-month');
      
      const typeMatch = activeFilter === 'all' || itemType === activeFilter;
      const monthMatch = activeMonth === 'all' || itemMonth === activeMonth;
      
      item.style.display = typeMatch && monthMatch ? '' : 'none';
    });
  }, [activeFilter]);

  const filterTypes = [
    { id: 'all', label: '全部', color: '#6b7280', count: 24 },
    { id: 'core-feature', label: '核心功能发布', color: '#16A34A', count: 4 },
    { id: 'optimization', label: '调整与优化', color: '#F59E0B', count: 3 },
    { id: 'fixes', label: '修复与功能下线', color: '#EF4444', count: 3 },
    { id: 'campaign', label: '活动启动', color: '#A855F7', count: 14 }
  ];

  const activeType = filterTypes.find(type => type.id === activeFilter) || filterTypes[0];

  return (
    <div style={{ marginBottom: '2rem', position: 'relative' }}>
      <div
        onClick={() => setIsOpen(!isOpen)}
        style={{
          display: 'inline-flex',
          alignItems: 'center',
          gap: '0.5rem',
          padding: '0.625rem 1rem',
          border: '2px solid #e5e7eb',
          borderRadius: '0.5rem',
          background: 'white',
          cursor: 'pointer',
          fontSize: '0.875rem',
          fontWeight: '500',
          boxShadow: isOpen ? `0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)` : '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
          transition: 'all 0.2s ease',
          userSelect: 'none',
          minWidth: '200px'
        }}
      >
        <span
          style={{
            width: '12px',
            height: '12px',
            borderRadius: '50%',
            backgroundColor: activeType.color,
            display: 'inline-block',
            flexShrink: 0
          }}
        />
        <span style={{ flex: 1 }}>
          {activeType.label} ({activeType.count})
        </span>
        <span
          style={{
            display: 'inline-block',
            width: '0',
            height: '0',
            borderLeft: '5px solid transparent',
            borderRight: '5px solid transparent',
            borderTop: '6px solid #6b7280',
            transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)',
            transition: 'transform 0.2s ease',
            flexShrink: 0
          }}
        />
      </div>
      
      {isOpen && (
        <div
          onMouseEnter={() => setIsMenuHovered(true)}
          onMouseLeave={() => setIsMenuHovered(false)}
          style={{
            position: 'absolute',
            top: '100%',
            left: 0,
            marginTop: '0.5rem',
            backgroundColor: 'white',
            border: `2px solid ${isMenuHovered ? '#9ca3af' : '#e5e7eb'}`,
            borderRadius: '0.5rem',
            boxShadow: isMenuHovered 
              ? '0 10px 15px -3px rgba(0, 0, 0, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.1)' 
              : '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
            zIndex: 1000,
            minWidth: '280px',
            overflow: 'hidden',
            transition: 'border-color 0.2s ease, box-shadow 0.2s ease'
          }}
        >
          {filterTypes.map((type) => (
            <div
              key={type.id}
              onClick={() => {
                setActiveFilter(type.id);
                setIsOpen(false);
              }}
              style={{
                padding: '0.75rem 1rem',
                cursor: 'pointer',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'space-between',
                borderBottom: type.id !== filterTypes[filterTypes.length - 1].id ? '1px solid #f3f4f6' : 'none',
                backgroundColor: activeFilter === type.id ? '#f9fafb' : 'white',
                transition: 'background-color 0.15s ease'
              }}
              onMouseEnter={(e) => {
                if (activeFilter !== type.id) {
                  e.currentTarget.style.backgroundColor = '#f3f4f6';
                }
              }}
              onMouseLeave={(e) => {
                if (activeFilter !== type.id) {
                  e.currentTarget.style.backgroundColor = 'white';
                }
              }}
            >
              <span style={{ flex: 1, fontSize: '0.875rem', fontWeight: activeFilter === type.id ? '600' : '400' }}>
                {type.label}
              </span>
              <span style={{ 
                fontSize: '0.75rem', 
                color: '#6b7280',
                fontWeight: '500'
              }}>
                {type.count}
              </span>
            </div>
          ))}
        </div>
      )}
      
      {isOpen && (
        <div
          onClick={() => setIsOpen(false)}
          style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            zIndex: 999,
            backgroundColor: 'transparent'
          }}
        />
      )}
    </div>
  );
};

export const MonthFilter = () => {
  const [activeMonth, setActiveMonth] = useState('all');
  const [isOpen, setIsOpen] = useState(false);
  const [isMenuHovered, setIsMenuHovered] = useState(false);

  useEffect(() => {
    window.activeMonthFilter = activeMonth;
    const event = new Event('monthFilterChange');
    window.dispatchEvent(event);
  }, [activeMonth]);

  useEffect(() => {
    const handleMonthChange = () => {
      const items = document.querySelectorAll('.changelog-item');
      const activeType = window.activeTypeFilter || 'all';
      
      items.forEach((item) => {
        const itemType = item.getAttribute('data-type');
        const itemMonth = item.getAttribute('data-month');
        
        const typeMatch = activeType === 'all' || itemType === activeType;
        const monthMatch = activeMonth === 'all' || itemMonth === activeMonth;
        
        item.style.display = typeMatch && monthMatch ? '' : 'none';
      });
    };

    window.addEventListener('monthFilterChange', handleMonthChange);
    handleMonthChange();
    
    return () => {
      window.removeEventListener('monthFilterChange', handleMonthChange);
    };
  }, [activeMonth]);

  const months = [
    { id: 'all', label: '全部月份', count: 24 },
    { id: 'dec', label: '十二月', count: 1 },
    { id: 'nov', label: '十一月', count: 3 },
    { id: 'oct', label: '十月', count: 6 },
    { id: 'sep', label: '九月', count: 3 },
    { id: 'aug', label: '八月', count: 5 },
    { id: 'jul', label: '七月', count: 5 },
    { id: 'jun', label: '六月', count: 1 }
  ];

  const activeMonthData = months.find(month => month.id === activeMonth) || months[0];

  return (
    <div style={{ marginBottom: '2rem', position: 'relative', marginLeft: '1rem' }}>
      <div
        onClick={() => setIsOpen(!isOpen)}
        style={{
          display: 'inline-flex',
          alignItems: 'center',
          gap: '0.5rem',
          padding: '0.625rem 1rem',
          border: '2px solid #e5e7eb',
          borderRadius: '0.5rem',
          background: 'white',
          cursor: 'pointer',
          fontSize: '0.875rem',
          fontWeight: '500',
          boxShadow: isOpen ? `0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)` : '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
          transition: 'all 0.2s ease',
          userSelect: 'none',
          minWidth: '200px'
        }}
      >
        <span style={{ flex: 1 }}>
          {activeMonthData.label} ({activeMonthData.count})
        </span>
        <span
          style={{
            display: 'inline-block',
            width: '0',
            height: '0',
            borderLeft: '5px solid transparent',
            borderRight: '5px solid transparent',
            borderTop: '6px solid #6b7280',
            transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)',
            transition: 'transform 0.2s ease',
            flexShrink: 0
          }}
        />
      </div>
      
      {isOpen && (
        <div
          onMouseEnter={() => setIsMenuHovered(true)}
          onMouseLeave={() => setIsMenuHovered(false)}
          style={{
            position: 'absolute',
            top: '100%',
            left: 0,
            marginTop: '0.5rem',
            backgroundColor: 'white',
            border: `2px solid ${isMenuHovered ? '#9ca3af' : '#e5e7eb'}`,
            borderRadius: '0.5rem',
            boxShadow: isMenuHovered 
              ? '0 10px 15px -3px rgba(0, 0, 0, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.1)' 
              : '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
            zIndex: 1000,
            minWidth: '280px',
            overflow: 'hidden',
            transition: 'border-color 0.2s ease, box-shadow 0.2s ease'
          }}
        >
          {months.map((month) => (
            <div
              key={month.id}
              onClick={() => {
                setActiveMonth(month.id);
                setIsOpen(false);
              }}
              style={{
                padding: '0.75rem 1rem',
                cursor: 'pointer',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'space-between',
                borderBottom: month.id !== months[months.length - 1].id ? '1px solid #f3f4f6' : 'none',
                backgroundColor: activeMonth === month.id ? '#f9fafb' : 'white',
                transition: 'background-color 0.15s ease'
              }}
              onMouseEnter={(e) => {
                if (activeMonth !== month.id) {
                  e.currentTarget.style.backgroundColor = '#f3f4f6';
                }
              }}
              onMouseLeave={(e) => {
                if (activeMonth !== month.id) {
                  e.currentTarget.style.backgroundColor = 'white';
                }
              }}
            >
              <span style={{ flex: 1, fontSize: '0.875rem', fontWeight: activeMonth === month.id ? '600' : '400' }}>
                {month.label}
              </span>
              <span style={{ 
                fontSize: '0.75rem', 
                color: '#6b7280',
                fontWeight: '500'
              }}>
                {month.count}
              </span>
            </div>
          ))}
        </div>
      )}
      
      {isOpen && (
        <div
          onClick={() => setIsOpen(false)}
          style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            zIndex: 999,
            backgroundColor: 'transparent'
          }}
        />
      )}
    </div>
  );
};
